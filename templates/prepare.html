{% extends "layout.html" %}
{% block content %}

<div class="form-card">

    <h1 class="page-title" data-i18n="page_prepare_title">GÃ¶nderiyi HazÄ±rla</h1>
    <p class="page-desc" data-i18n="page_prepare_desc">
        Metni yaz, platform ve format seÃ§, medyayÄ± ekle ve istersen plana al.
        Ã–lÃ§ek (aspect ratio) bilgisi seÃ§tiÄŸin format ve platformlara gÃ¶re otomatik Ã¶nerilir.
    </p>

    <!-- FORM BAÅLANGICI -->
    <form method="POST" action="{{ url_for('create_post') }}" enctype="multipart/form-data">

        <!-- GÃ¶nderi metni -->
        <div class="form-row">
            <label class="form-label" data-i18n="label_post_text">GÃ¶nderi Metni</label>
            <textarea
                id="post-text"
                name="post_text"
                class="input textarea"
                rows="4"
                data-i18n-placeholder="placeholder_post_text"
                placeholder="Metnini buraya yaz..."
            >{{ default_text or "" }}</textarea>

            <div style="margin-top:8px;">
                <button
                    type="button"
                    class="btn neon-btn"
                    id="btn-ai-text"
                    data-i18n="btn_ai_text"
                >
                    âš¡ Yapay Zeka ile Metin Ã–ner
                </button>
            </div>
        </div>

        <!-- Hashtagler -->
        <div class="form-row">
            <label class="form-label" data-i18n="label_hashtags">Hashtagler</label>
            <textarea
                id="hashtags"
                name="hashtags"
                class="input textarea"
                rows="3"
                data-i18n-placeholder="placeholder_hashtags"
                placeholder="#hedefler #mutluluk #bugÃ¼n..."
            >{{ default_hashtags or "" }}</textarea>

            <div style="margin-top:8px;">
                <button
                    type="button"
                    class="btn neon-btn"
                    id="btn-ai-hashtag"
                    data-i18n="btn_ai_hashtag"
                >
                    âš¡ # Hashtag Ã–ner
                </button>
            </div>
        </div>

        <!-- Platformlar -->
        <div class="form-row">
            <label class="form-label" data-i18n="label_platforms">Platformlar</label>
            <div class="pill-group">
                <label class="pill">
                    <input type="checkbox" name="platforms" value="instagram">
                    <span>ğŸ“¸ Instagram</span>
                </label>
                <label class="pill">
                    <input type="checkbox" name="platforms" value="facebook">
                    <span>ğŸ“˜ Facebook</span>
                </label>
                <label class="pill">
                    <input type="checkbox" name="platforms" value="x">
                    <span>ğ• Twitter</span>
                </label>
                <label class="pill">
                    <input type="checkbox" name="platforms" value="youtube">
                    <span>â–¶ï¸ YouTube</span>
                </label>
                <label class="pill">
                    <input type="checkbox" name="platforms" value="tiktok">
                    <span>ğŸµ TikTok</span>
                </label>
            </div>
        </div>

        <!-- Format -->
        <div class="form-row">
            <label class="form-label" data-i18n="label_format">Format</label>
            <div class="pill-group">
                <label class="pill">
                    <input type="radio" name="format" value="normal" checked>
                    <span data-i18n="format_normal">Normal GÃ¶nderi</span>
                </label>
                <label class="pill">
                    <input type="radio" name="format" value="short">
                    <span data-i18n="format_short">Short / Reels</span>
                </label>
                <label class="pill">
                    <input type="radio" name="format" value="story">
                    <span data-i18n="format_story">Story</span>
                </label>
            </div>
        </div>

        <!-- Ã–lÃ§ek bilgisi + rozetler -->
        <div class="form-row">
            <label class="form-label" data-i18n="label_aspect_title">Ã–lÃ§ek Bilgisi</label>
            <p class="helper-text" data-i18n="text_aspect_info">
                SeÃ§tiÄŸin platform ve formata gÃ¶re sistem otomatik bir aspect ratio (1:1, 4:5, 9:16, 16:9) Ã¶nerir ve gÃ¶nderi kaydÄ±na ekler.
                ZamanlanmÄ±ÅŸ gÃ¶nderilerde de aynÄ± ÅŸekilde kullanÄ±lÄ±r.
            </p>

            <!-- SeÃ§ilen deÄŸeri backend'e gÃ¶ndermek iÃ§in gizli input -->
            <input type="hidden" name="aspect_ratio" id="aspect-ratio-input" value="">

            <div class="aspect-badge-group">
                <button type="button" class="aspect-badge" data-aspect="1:1">1 : 1</button>
                <button type="button" class="aspect-badge" data-aspect="4:5">4 : 5</button>
                <button type="button" class="aspect-badge" data-aspect="9:16">9 : 16</button>
                <button type="button" class="aspect-badge" data-aspect="16:9">16 : 9</button>
            </div>
        </div>

        <!-- Medya -->
        <div class="form-row">
            <label class="form-label" data-i18n="label_media">Medya Ekle</label>
            <input type="file" name="media" id="media-input" class="input file-input" multiple>
        </div>

        <!-- Zamanlama -->
        <div class="form-row">
            <label class="form-label" data-i18n="label_schedule">Zamanlama</label>
            <input
                type="datetime-local"
                name="schedule_at"
                id="schedule-at"
                class="input"
            >
        </div>

        <!-- Butonlar -->
        <div class="form-actions">
            <!-- Taslak: action=draft -->
            <button
                type="submit"
                class="btn ghost-btn"
                name="action"
                value="draft"
                data-i18n="btn_save_draft"
            >
                Taslak Olarak Kaydet
            </button>

            <!-- GÃ¶nderiyi oluÅŸtur: action=submit -->
            <button
                type="submit"
                class="btn primary-btn"
                name="action"
                value="submit"
                data-i18n="btn_submit_now"
            >
                GÃ¶nderiyi OluÅŸtur
            </button>
        </div>

    </form>
    <!-- FORM BÄ°TÄ°ÅÄ° -->

</div>

{% endblock %}
